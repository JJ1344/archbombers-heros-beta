namespace SpriteKind {
    export const variable = SpriteKind.create()
    export const hero_projectile = SpriteKind.create()
    export const hero_projectile2 = SpriteKind.create()
    export const enemy_projectile = SpriteKind.create()
    export const enemy_projectile2 = SpriteKind.create()
    export const hero = SpriteKind.create()
    export const rival = SpriteKind.create()
}
scene.onOverlapTile(SpriteKind.rival, tileUtil.door0, function (sprite, location) {
    tileUtil.loadConnectedMap(MapConnectionKind.Door1)
    tiles.placeOnRandomTile(my_hero, tileUtil.door0)
    tiles.placeOnRandomTile(my_enemy, tileUtil.door0)
    if (tileUtil.currentTilemap() == tilemap1) {
        my_hero.x += -16
        my_enemy.x += -16
    }
    if (tileUtil.currentTilemap() == tilemap2) {
        my_hero.x += 16
        my_enemy.x += 16
    }
})
controller.player2.onButtonEvent(ControllerButton.B, ControllerButtonEvent.Pressed, function () {
    if (characterAnimations.matchesRule(my_enemy, characterAnimations.rule(Predicate.FacingLeft))) {
        animation.runImageAnimation(
        my_enemy,
        [img`
            ........................
            ........................
            ........................
            ........................
            ........................
            ................fff.....
            ...........b..fff22f....
            ...........b.ff222f2f...
            ..........b.ffffffffff..
            ..........be.d21dddde...
            .........b.e.df1dddde...
            ........1ddeddddddeee...
            .........4ddd2222222f...
            .........b.e.2222bb2f...
            .........b.e.ffffffff...
            ..........b..ff...ff....
            ........................
            ........................
            ........................
            ........................
            ........................
            ........................
            ........................
            ........................
            `,img`
            ........................
            ........................
            ........................
            ........................
            ........................
            ................fff.....
            ...........b..fff22f....
            ...........b.ff222f2f...
            ..........b.ffffffffff..
            ..........be.d21dddde...
            .........b..edf1dddde...
            ........1dd.ddddddeee...
            .........4ddd2222222f...
            .........b..e2222bb2f...
            .........b.e.ffffffff...
            ..........b..ff...ff....
            ........................
            ........................
            ........................
            ........................
            ........................
            ........................
            ........................
            ........................
            `,img`
            ........................
            ........................
            ........................
            ........................
            ........................
            ................fff.....
            ...........b..fff22f....
            ...........b.ff222f2f...
            ..........b.ffffffffff..
            ..........be.d21dddde...
            .........b.e.df1dddde...
            .........ddeddddddeee...
            .........4ddd2222222f...
            .........b.e.2222bb2f...
            .........b.e.ffffffff...
            ..........b..ff...ff....
            ........................
            ........................
            ........................
            ........................
            ........................
            ........................
            ........................
            ........................
            `,img`
            ........................
            ........................
            ........................
            ............f...........
            ............f...........
            ...........ff...fff.....
            ...........f..fff22f....
            ...........f.ff222f2f...
            ..........f.ffffffffff..
            ..........f..d21dddde...
            ..........f..df1dddde...
            .........bbb.dddddeee...
            .........d4.d2222222f...
            ..........4dd2222bb2f...
            .............ffffffff...
            .............ff...ff....
            ........................
            ........................
            ........................
            ........................
            ........................
            ........................
            ........................
            ........................
            `],
        200,
        false
        )
        enemy_projectile = sprites.createProjectileFromSprite(img`
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . f . . 
            . . . . . . . . . 1 b b b . . . 
            . . . . . . . . . . . . . f . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            `, my_enemy, -100, 0)
        characterAnimations.setCharacterState(enemy_1, characterAnimations.rule(Predicate.Moving))
    } else {
        if (characterAnimations.matchesRule(my_enemy, characterAnimations.rule(Predicate.FacingRight))) {
            animation.runImageAnimation(
            my_enemy,
            [img`
                ........................
                ........................
                ........................
                ........................
                ........................
                .....fff................
                ....f22fff..b...........
                ...f2f222ff.b...........
                ..ffffffffff.b..........
                ...edddd12d.eb..........
                ...edddd1fd.e.b.........
                ...eeeddddddedd1........
                ...f2222222ddd4.........
                ...f2bb2222.e.b.........
                ...ffffffff.e.b.........
                ....ff...ff..b..........
                ........................
                ........................
                ........................
                ........................
                ........................
                ........................
                ........................
                ........................
                `,img`
                ........................
                ........................
                ........................
                ........................
                ........................
                .....fff................
                ....f22fff..b...........
                ...f2f222ff.b...........
                ..ffffffffff.b..........
                ...edddd12d.eb..........
                ...edddd1fde..b.........
                ...eeedddddd.dd1........
                ...f2222222ddd4.........
                ...f2bb2222e..b.........
                ...ffffffff.e.b.........
                ....ff...ff..b..........
                ........................
                ........................
                ........................
                ........................
                ........................
                ........................
                ........................
                ........................
                `,img`
                ........................
                ........................
                ........................
                ........................
                ........................
                .....fff................
                ....f22fff..b...........
                ...f2f222ff.b...........
                ..ffffffffff.b..........
                ...edddd12d.eb..........
                ...edddd1fd.e.b.........
                ...eeeddddddedd.........
                ...f2222222ddd4.........
                ...f2bb2222.e.b.........
                ...ffffffff.e.b.........
                ....ff...ff..b..........
                ........................
                ........................
                ........................
                ........................
                ........................
                ........................
                ........................
                ........................
                `,img`
                ........................
                ........................
                ........................
                ...........f............
                ...........f............
                .....fff...ff...........
                ....f22fff..f...........
                ...f2f222ff.f...........
                ..ffffffffff.f..........
                ...edddd12d..f..........
                ...edddd1fd..f..........
                ...eeeddddd.bbb.........
                ...f2222222d.4d.........
                ...f2bb2222dd4..........
                ...ffffffff.............
                ....ff...ff.............
                ........................
                ........................
                ........................
                ........................
                ........................
                ........................
                ........................
                ........................
                `],
            200,
            false
            )
            enemy_projectile = sprites.createProjectileFromSprite(img`
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . f . . . . . . . . . . . . . 
                . . . b b b 1 . . . . . . . . . 
                . . f . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                `, my_enemy, 100, 0)
            characterAnimations.setCharacterState(enemy_1, characterAnimations.rule(Predicate.Moving))
        }
    }
})
controller.player1.onButtonEvent(ControllerButton.Left, ControllerButtonEvent.Released, function () {
    characterAnimations.setCharacterState(my_hero, characterAnimations.rule(Predicate.FacingLeft))
    animation.stopAnimation(animation.AnimationTypes.All, my_hero)
})
controller.player2.onButtonEvent(ControllerButton.A, ControllerButtonEvent.Pressed, function () {
    if (characterAnimations.matchesRule(enemy_1, characterAnimations.rule(Predicate.Moving))) {
        enemy_projectile2 = sprites.createProjectileFromSprite(img`
            . 3 . . . . . . . . . . . 4 . . 
            . 3 3 . . . . . . . . . 4 4 . . 
            . 3 d 3 . . 4 4 . . 4 4 d 4 . . 
            . . 3 5 3 4 5 5 4 4 d d 4 4 . . 
            . . 3 d 5 d 1 1 d 5 5 d 4 4 . . 
            . . 4 5 5 1 1 1 1 5 1 1 5 4 . . 
            . 4 5 5 5 5 1 1 5 1 1 1 d 4 4 . 
            . 4 d 5 1 1 5 5 5 1 1 1 5 5 4 . 
            . 4 4 5 1 1 5 5 5 5 5 d 5 5 4 . 
            . . 4 3 d 5 5 5 d 5 5 d d d 4 . 
            . 4 5 5 d 5 5 5 d d d 5 5 4 . . 
            . 4 5 5 d 3 5 d d 3 d 5 5 4 . . 
            . 4 4 d d 4 d d d 4 3 d d 4 . . 
            . . 4 5 4 4 4 4 4 4 4 4 4 . . . 
            . 4 5 4 . . 4 4 4 . . . 4 4 . . 
            . 4 4 . . . . . . . . . . 4 4 . 
            `, enemy_projectile, 0, 0)
        enemy_projectile.setKind(SpriteKind.enemy_projectile)
        enemy_projectile2.setKind(SpriteKind.enemy_projectile2)
        sprites.destroyAllSpritesOfKind(SpriteKind.enemy_projectile)
        timer.debounce("action", 500, function () {
            sprites.destroyAllSpritesOfKind(SpriteKind.enemy_projectile2)
        })
        characterAnimations.setCharacterState(enemy_1, characterAnimations.rule(Predicate.NotMoving))
    } else {
        my_enemy.sayText("haha", 200, false)
        timer.debounce("action", 500, function () {
            my_enemy.sayText("shut up and fight -jaden", 1000, false)
        })
    }
})
controller.player2.onButtonEvent(ControllerButton.Left, ControllerButtonEvent.Released, function () {
    characterAnimations.setCharacterState(my_enemy, characterAnimations.rule(Predicate.FacingLeft))
    animation.stopAnimation(animation.AnimationTypes.All, my_enemy)
})
controller.player2.onButtonEvent(ControllerButton.Right, ControllerButtonEvent.Pressed, function () {
    characterAnimations.setCharacterState(my_enemy, characterAnimations.rule(Predicate.MovingRight))
    animation.runImageAnimation(
    my_enemy,
    [img`
        ........................
        ........................
        ........................
        ........................
        ........................
        .....fff................
        ....f22fff..............
        ...f2f222ff.............
        ..ffffffffff............
        ...edddd12d.............
        ...edddd1fd.............
        ...eeeddddd.............
        ...fd222222.............
        ...fddb2222.............
        ...ffffffff.............
        ....ff...ff.............
        ........................
        ........................
        ........................
        ........................
        ........................
        ........................
        ........................
        ........................
        `,img`
        ........................
        ........................
        ........................
        ........................
        ........................
        .....fff................
        ....f22fff..............
        ...f2f222ff.............
        ..ffffffffff............
        ...edddd12d.............
        ...edddd1fd.............
        ...eeeddddd.............
        ...fd222222.............
        ...fddb2222.............
        ...ffffffff.............
        .....ff.ff..............
        ........................
        ........................
        ........................
        ........................
        ........................
        ........................
        ........................
        ........................
        `,img`
        ........................
        ........................
        ........................
        ........................
        ........................
        .....fff................
        ....f22fff..............
        ...f2f222ff.............
        ..ffffffffff............
        ...edddd12d.............
        ...edddd1fd.............
        ...eeeddddd.............
        ...fd222222.............
        ...fddb2222.............
        ...ffffffff.............
        ......ff................
        ........................
        ........................
        ........................
        ........................
        ........................
        ........................
        ........................
        ........................
        `,img`
        ........................
        ........................
        ........................
        ........................
        ........................
        .....fff................
        ....f22fff..............
        ...f2f222ff.............
        ..ffffffffff............
        ...edddd12d.............
        ...edddd1fd.............
        ...eeeddddd.............
        ...fd222222.............
        ...fddb2222.............
        ...ffffffff.............
        .....ff.ff..............
        ........................
        ........................
        ........................
        ........................
        ........................
        ........................
        ........................
        ........................
        `,img`
        ........................
        ........................
        ........................
        ........................
        ........................
        .....fff................
        ....f22fff..............
        ...f2f222ff.............
        ..ffffffffff............
        ...edddd12d.............
        ...edddd1fd.............
        ...eeeddddd.............
        ...fd222222.............
        ...fddb2222.............
        ...ffffffff.............
        ....ff..ff..............
        ........................
        ........................
        ........................
        ........................
        ........................
        ........................
        ........................
        ........................
        `,img`
        ........................
        ........................
        ........................
        ........................
        ........................
        .....fff................
        ....f22fff..............
        ...f2f222ff.............
        ..ffffffffff............
        ...edddd12d.............
        ...edddd1fd.............
        ...eeeddddd.............
        ...fd222222.............
        ...fddb2222.............
        ...ffffffff.............
        ....ff...ff.............
        ........................
        ........................
        ........................
        ........................
        ........................
        ........................
        ........................
        ........................
        `],
    100,
    true
    )
})
tileUtil.onMapLoaded(function (tilemap3) {
    if (tileUtil.currentTilemap() == tilemap1) {
        tileUtil.coverTile(tiles.getTileLocation(23, 6), sprites.dungeon.darkGroundNorthEast0)
        tileUtil.coverTile(tiles.getTileLocation(23, 7), sprites.dungeon.darkGroundSouthEast0)
    } else if (tileUtil.currentTilemap() == tilemap2) {
        tileUtil.coverAllTiles(tileUtil.door0, assets.tile`myTile`)
    }
})
scene.onOverlapTile(SpriteKind.hero, tileUtil.door0, function (sprite, location) {
    tileUtil.loadConnectedMap(MapConnectionKind.Door1)
    tiles.placeOnRandomTile(my_hero, tileUtil.door0)
    if (tileUtil.currentTilemap() == tilemap1) {
        my_hero.x += -16
    }
    if (tileUtil.currentTilemap() == tilemap2) {
        my_hero.x += 16
    }
})
controller.player2.onButtonEvent(ControllerButton.Left, ControllerButtonEvent.Pressed, function () {
    characterAnimations.setCharacterState(my_enemy, characterAnimations.rule(Predicate.MovingLeft))
    animation.runImageAnimation(
    my_enemy,
    [img`
        ........................
        ........................
        ........................
        ........................
        ........................
        ................fff.....
        ..............fff22f....
        .............ff222f2f...
        ............ffffffffff..
        .............d21dddde...
        .............df1dddde...
        .............dddddeee...
        .............222222df...
        .............2222bddf...
        .............ffffffff...
        .............ff...ff....
        ........................
        ........................
        ........................
        ........................
        ........................
        ........................
        ........................
        ........................
        `,img`
        ........................
        ........................
        ........................
        ........................
        ........................
        ................fff.....
        ..............fff22f....
        .............ff222f2f...
        ............ffffffffff..
        .............d21dddde...
        .............df1dddde...
        .............dddddeee...
        .............222222df...
        .............2222bddf...
        .............ffffffff...
        ..............ff.ff.....
        ........................
        ........................
        ........................
        ........................
        ........................
        ........................
        ........................
        ........................
        `,img`
        ........................
        ........................
        ........................
        ........................
        ........................
        ................fff.....
        ..............fff22f....
        .............ff222f2f...
        ............ffffffffff..
        .............d21dddde...
        .............df1dddde...
        .............dddddeee...
        .............222222df...
        .............2222bddf...
        .............ffffffff...
        ................ff......
        ........................
        ........................
        ........................
        ........................
        ........................
        ........................
        ........................
        ........................
        `,img`
        ........................
        ........................
        ........................
        ........................
        ........................
        ................fff.....
        ..............fff22f....
        .............ff222f2f...
        ............ffffffffff..
        .............d21dddde...
        .............df1dddde...
        .............dddddeee...
        .............222222df...
        .............2222bddf...
        .............ffffffff...
        ..............ff.ff.....
        ........................
        ........................
        ........................
        ........................
        ........................
        ........................
        ........................
        ........................
        `,img`
        ........................
        ........................
        ........................
        ........................
        ........................
        ................fff.....
        ..............fff22f....
        .............ff222f2f...
        ............ffffffffff..
        .............d21dddde...
        .............df1dddde...
        .............dddddeee...
        .............222222df...
        .............2222bddf...
        .............ffffffff...
        ..............ff..ff....
        ........................
        ........................
        ........................
        ........................
        ........................
        ........................
        ........................
        ........................
        `,img`
        ........................
        ........................
        ........................
        ........................
        ........................
        ................fff.....
        ..............fff22f....
        .............ff222f2f...
        ............ffffffffff..
        .............d21dddde...
        .............df1dddde...
        .............dddddeee...
        .............222222df...
        .............2222bddf...
        .............ffffffff...
        .............ff...ff....
        ........................
        ........................
        ........................
        ........................
        ........................
        ........................
        ........................
        ........................
        `],
    100,
    true
    )
})
controller.player1.onButtonEvent(ControllerButton.Right, ControllerButtonEvent.Pressed, function () {
    characterAnimations.setCharacterState(hero_1, characterAnimations.rule(Predicate.MovingRight))
    animation.runImageAnimation(
    my_hero,
    [img`
        ........................
        ........................
        ........................
        ........................
        ........................
        .....fff................
        ....f88fff..............
        ...f8f888ff.............
        ..ffffffffff............
        ...edddd18d.............
        ...edddd1fd.............
        ...eeeddddd.............
        ...fd888888.............
        ...fddb8888.............
        ...ffffffff.............
        ....ff...ff.............
        ........................
        ........................
        ........................
        ........................
        ........................
        ........................
        ........................
        ........................
        `,img`
        ........................
        ........................
        ........................
        ........................
        ........................
        .....fff................
        ....f88fff..............
        ...f8f888ff.............
        ..ffffffffff............
        ...edddd18d.............
        ...edddd1fd.............
        ...eeeddddd.............
        ...fd888888.............
        ...fddb8888.............
        ...ffffffff.............
        .....ff.ff..............
        ........................
        ........................
        ........................
        ........................
        ........................
        ........................
        ........................
        ........................
        `,img`
        ........................
        ........................
        ........................
        ........................
        ........................
        .....fff................
        ....f88fff..............
        ...f8f888ff.............
        ..ffffffffff............
        ...edddd18d.............
        ...edddd1fd.............
        ...eeeddddd.............
        ...fd888888.............
        ...fddb8888.............
        ...ffffffff.............
        ......ff................
        ........................
        ........................
        ........................
        ........................
        ........................
        ........................
        ........................
        ........................
        `,img`
        ........................
        ........................
        ........................
        ........................
        ........................
        .....fff................
        ....f88fff..............
        ...f8f888ff.............
        ..ffffffffff............
        ...edddd18d.............
        ...edddd1fd.............
        ...eeeddddd.............
        ...fd888888.............
        ...fddb8888.............
        ...ffffffff.............
        .....ff.ff..............
        ........................
        ........................
        ........................
        ........................
        ........................
        ........................
        ........................
        ........................
        `,img`
        ........................
        ........................
        ........................
        ........................
        ........................
        .....fff................
        ....f88fff..............
        ...f8f888ff.............
        ..ffffffffff............
        ...edddd18d.............
        ...edddd1fd.............
        ...eeeddddd.............
        ...fd888888.............
        ...fddb8888.............
        ...ffffffff.............
        ....ff..ff..............
        ........................
        ........................
        ........................
        ........................
        ........................
        ........................
        ........................
        ........................
        `,img`
        ........................
        ........................
        ........................
        ........................
        ........................
        .....fff................
        ....f88fff..............
        ...f8f888ff.............
        ..ffffffffff............
        ...edddd18d.............
        ...edddd1fd.............
        ...eeeddddd.............
        ...fd888888.............
        ...fddb8888.............
        ...ffffffff.............
        ....ff...ff.............
        ........................
        ........................
        ........................
        ........................
        ........................
        ........................
        ........................
        ........................
        `],
    100,
    true
    )
})
controller.player1.onButtonEvent(ControllerButton.A, ControllerButtonEvent.Pressed, function () {
    if (characterAnimations.matchesRule(hero_1, characterAnimations.rule(Predicate.Moving))) {
        projectile2 = sprites.createProjectileFromSprite(img`
            . 3 . . . . . . . . . . . 4 . . 
            . 3 3 . . . . . . . . . 4 4 . . 
            . 3 d 3 . . 4 4 . . 4 4 d 4 . . 
            . . 3 5 3 4 5 5 4 4 d d 4 4 . . 
            . . 3 d 5 d 1 1 d 5 5 d 4 4 . . 
            . . 4 5 5 1 1 1 1 5 1 1 5 4 . . 
            . 4 5 5 5 5 1 1 5 1 1 1 d 4 4 . 
            . 4 d 5 1 1 5 5 5 1 1 1 5 5 4 . 
            . 4 4 5 1 1 5 5 5 5 5 d 5 5 4 . 
            . . 4 3 d 5 5 5 d 5 5 d d d 4 . 
            . 4 5 5 d 5 5 5 d d d 5 5 4 . . 
            . 4 5 5 d 3 5 d d 3 d 5 5 4 . . 
            . 4 4 d d 4 d d d 4 3 d d 4 . . 
            . . 4 5 4 4 4 4 4 4 4 4 4 . . . 
            . 4 5 4 . . 4 4 4 . . . 4 4 . . 
            . 4 4 . . . . . . . . . . 4 4 . 
            `, projectile, 0, 0)
        projectile.setKind(SpriteKind.hero_projectile)
        projectile2.setKind(SpriteKind.hero_projectile2)
        sprites.destroyAllSpritesOfKind(SpriteKind.hero_projectile)
        timer.debounce("action", 500, function () {
            sprites.destroyAllSpritesOfKind(SpriteKind.hero_projectile2)
        })
        characterAnimations.setCharacterState(hero_1, characterAnimations.rule(Predicate.NotMoving))
    } else {
        my_hero.sayText("haha", 200, false)
        timer.debounce("action", 500, function () {
            my_hero.sayText("shut up and fight -jaden", 1000, false)
        })
    }
})
info.player1.onLifeZero(function () {
    sprites.destroy(my_hero)
})
controller.player2.onButtonEvent(ControllerButton.Right, ControllerButtonEvent.Released, function () {
    characterAnimations.setCharacterState(my_enemy, characterAnimations.rule(Predicate.FacingRight))
    animation.stopAnimation(animation.AnimationTypes.All, my_enemy)
})
controller.player2.onEvent(ControllerEvent.Connected, function () {
    my_enemy = sprites.create(img`
        ........................
        ........................
        ........................
        ............f...........
        ............f...........
        ...........ff...fff.....
        ...........f..fff22f....
        ...........f.ff222f2f...
        ..........f.ffffffffff..
        ..........f..d21dddde...
        ..........f..df1dddde...
        .........bbb.dddddeee...
        .........d4.d2222222f...
        ..........4dd2222bb2f...
        .............ffffffff...
        .............ff...ff....
        ........................
        ........................
        ........................
        ........................
        ........................
        ........................
        ........................
        ........................
        `, SpriteKind.rival)
    splitScreen.cameraFollowSprite(splitScreen.Camera.Camera1, my_hero)
    splitScreen.cameraFollowSprite(splitScreen.Camera.Camera2, my_enemy)
    info.player2.setLife(4)
    controller.player2.moveSprite(my_enemy)
    enemy_1 = sprites.create(img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        `, SpriteKind.variable)
    my_hero.setKind(SpriteKind.rival)
})
controller.player1.onButtonEvent(ControllerButton.B, ControllerButtonEvent.Pressed, function () {
    if (characterAnimations.matchesRule(my_hero, characterAnimations.rule(Predicate.FacingLeft))) {
        animation.runImageAnimation(
        my_hero,
        [img`
            ........................
            ........................
            ........................
            ........................
            ........................
            ................fff.....
            ...........b..fff88f....
            ...........b.ff888f8f...
            ..........b.ffffffffff..
            ..........be.d81dddde...
            .........b.e.df1dddde...
            ........1ddeddddddeee...
            .........9ddd8888888f...
            .........b.e.8888bb8f...
            .........b.e.ffffffff...
            ..........b..ff...ff....
            ........................
            ........................
            ........................
            ........................
            ........................
            ........................
            ........................
            ........................
            `,img`
            ........................
            ........................
            ........................
            ........................
            ........................
            ................fff.....
            ...........b..fff88f....
            ...........b.ff888f8f...
            ..........b.ffffffffff..
            ..........be.d81dddde...
            .........b..edf1dddde...
            ........1dd.ddddddeee...
            .........9ddd8888888f...
            .........b..e8888bb8f...
            .........b.e.ffffffff...
            ..........b..ff...ff....
            ........................
            ........................
            ........................
            ........................
            ........................
            ........................
            ........................
            ........................
            `,img`
            ........................
            ........................
            ........................
            ........................
            ........................
            ................fff.....
            ...........b..fff88f....
            ...........b.ff888f8f...
            ..........b.ffffffffff..
            ..........be.d81dddde...
            .........b.e.df1dddde...
            .........ddeddddddeee...
            .........9ddd8888888f...
            .........b.e.8888bb8f...
            .........b.e.ffffffff...
            ..........b..ff...ff....
            ........................
            ........................
            ........................
            ........................
            ........................
            ........................
            ........................
            ........................
            `,img`
            ........................
            ........................
            ........................
            ............f...........
            ............f...........
            ...........ff...fff.....
            ...........f..fff88f....
            ...........f.ff888f8f...
            ..........f.ffffffffff..
            ..........f..d81dddde...
            ..........f..df1dddde...
            .........bbb.dddddeee...
            .........d9.d8888888f...
            ..........9dd8888bb8f...
            .............ffffffff...
            .............ff...ff....
            ........................
            ........................
            ........................
            ........................
            ........................
            ........................
            ........................
            ........................
            `],
        200,
        false
        )
        projectile = sprites.createProjectileFromSprite(img`
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . f . . 
            . . . . . . . . . 1 b b b . . . 
            . . . . . . . . . . . . . f . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            . . . . . . . . . . . . . . . . 
            `, my_hero, -100, 0)
        characterAnimations.setCharacterState(hero_1, characterAnimations.rule(Predicate.Moving))
    } else {
        if (characterAnimations.matchesRule(my_hero, characterAnimations.rule(Predicate.FacingRight))) {
            animation.runImageAnimation(
            my_hero,
            [img`
                ........................
                ........................
                ........................
                ........................
                ........................
                .....fff................
                ....f88fff..b...........
                ...f8f888ff.b...........
                ..ffffffffff.b..........
                ...edddd18d.eb..........
                ...edddd1fd.e.b.........
                ...eeeddddddedd1........
                ...f8888888ddd9.........
                ...f8bb8888.e.b.........
                ...ffffffff.e.b.........
                ....ff...ff..b..........
                ........................
                ........................
                ........................
                ........................
                ........................
                ........................
                ........................
                ........................
                `,img`
                ........................
                ........................
                ........................
                ........................
                ........................
                .....fff................
                ....f88fff..b...........
                ...f8f888ff.b...........
                ..ffffffffff.b..........
                ...edddd18d.eb..........
                ...edddd1fde..b.........
                ...eeedddddd.dd1........
                ...f8888888ddd9.........
                ...f8bb8888e..b.........
                ...ffffffff.e.b.........
                ....ff...ff..b..........
                ........................
                ........................
                ........................
                ........................
                ........................
                ........................
                ........................
                ........................
                `,img`
                ........................
                ........................
                ........................
                ........................
                ........................
                .....fff................
                ....f88fff..b...........
                ...f8f888ff.b...........
                ..ffffffffff.b..........
                ...edddd18d.eb..........
                ...edddd1fd.e.b.........
                ...eeeddddddedd.........
                ...f8888888ddd9.........
                ...f8bb8888.e.b.........
                ...ffffffff.e.b.........
                ....ff...ff..b..........
                ........................
                ........................
                ........................
                ........................
                ........................
                ........................
                ........................
                ........................
                `,img`
                ........................
                ........................
                ........................
                ...........f............
                ...........f............
                .....fff...ff...........
                ....f88fff..f...........
                ...f8f888ff.f...........
                ..ffffffffff.f..........
                ...edddd18d..f..........
                ...edddd1fd..f..........
                ...eeeddddd.bbb.........
                ...f8888888d.9d.........
                ...f8bb8888dd9..........
                ...ffffffff.............
                ....ff...ff.............
                ........................
                ........................
                ........................
                ........................
                ........................
                ........................
                ........................
                ........................
                `],
            200,
            false
            )
            projectile = sprites.createProjectileFromSprite(img`
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . f . . . . . . . . . . . . . 
                . . . b b b 1 . . . . . . . . . 
                . . f . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                . . . . . . . . . . . . . . . . 
                `, my_hero, 100, 0)
            characterAnimations.setCharacterState(hero_1, characterAnimations.rule(Predicate.Moving))
        }
    }
})
controller.player1.onButtonEvent(ControllerButton.Right, ControllerButtonEvent.Released, function () {
    characterAnimations.setCharacterState(my_hero, characterAnimations.rule(Predicate.FacingRight))
    animation.stopAnimation(animation.AnimationTypes.All, my_hero)
})
controller.player1.onButtonEvent(ControllerButton.Left, ControllerButtonEvent.Pressed, function () {
    characterAnimations.setCharacterState(hero_1, characterAnimations.rule(Predicate.MovingLeft))
    animation.runImageAnimation(
    my_hero,
    [img`
        ........................
        ........................
        ........................
        ........................
        ........................
        ................fff.....
        ..............fff88f....
        .............ff888f8f...
        ............ffffffffff..
        .............d81dddde...
        .............df1dddde...
        .............dddddeee...
        .............888888df...
        .............8888bddf...
        .............ffffffff...
        .............ff...ff....
        ........................
        ........................
        ........................
        ........................
        ........................
        ........................
        ........................
        ........................
        `,img`
        ........................
        ........................
        ........................
        ........................
        ........................
        ................fff.....
        ..............fff88f....
        .............ff888f8f...
        ............ffffffffff..
        .............d81dddde...
        .............df1dddde...
        .............dddddeee...
        .............888888df...
        .............8888bddf...
        .............ffffffff...
        ..............ff.ff.....
        ........................
        ........................
        ........................
        ........................
        ........................
        ........................
        ........................
        ........................
        `,img`
        ........................
        ........................
        ........................
        ........................
        ........................
        ................fff.....
        ..............fff88f....
        .............ff888f8f...
        ............ffffffffff..
        .............d81dddde...
        .............df1dddde...
        .............dddddeee...
        .............888888df...
        .............8888bddf...
        .............ffffffff...
        ................ff......
        ........................
        ........................
        ........................
        ........................
        ........................
        ........................
        ........................
        ........................
        `,img`
        ........................
        ........................
        ........................
        ........................
        ........................
        ................fff.....
        ..............fff88f....
        .............ff888f8f...
        ............ffffffffff..
        .............d81dddde...
        .............df1dddde...
        .............dddddeee...
        .............888888df...
        .............8888bddf...
        .............ffffffff...
        ..............ff.ff.....
        ........................
        ........................
        ........................
        ........................
        ........................
        ........................
        ........................
        ........................
        `,img`
        ........................
        ........................
        ........................
        ........................
        ........................
        ................fff.....
        ..............fff88f....
        .............ff888f8f...
        ............ffffffffff..
        .............d81dddde...
        .............df1dddde...
        .............dddddeee...
        .............888888df...
        .............8888bddf...
        .............ffffffff...
        ..............ff..ff....
        ........................
        ........................
        ........................
        ........................
        ........................
        ........................
        ........................
        ........................
        `,img`
        ........................
        ........................
        ........................
        ........................
        ........................
        ................fff.....
        ..............fff88f....
        .............ff888f8f...
        ............ffffffffff..
        .............d81dddde...
        .............df1dddde...
        .............dddddeee...
        .............888888df...
        .............8888bddf...
        .............ffffffff...
        .............ff...ff....
        ........................
        ........................
        ........................
        ........................
        ........................
        ........................
        ........................
        ........................
        `],
    100,
    true
    )
})
let projectile: Sprite = null
let projectile2: Sprite = null
let enemy_projectile2: Sprite = null
let enemy_1: Sprite = null
let enemy_projectile: Sprite = null
let my_enemy: Sprite = null
let hero_1: Sprite = null
let my_hero: Sprite = null
let tilemap2: tiles.TileMapData = null
let tilemap1: tiles.TileMapData = null
tilemap1 = tilemap`level4`
tilemap2 = tilemap`level10`
tiles.setCurrentTilemap(tilemap1)
game.splash("arch-heros")
game.showLongText("Movement                 P1 W,A,S,D", DialogLayout.Bottom)
game.showLongText("bow attack             P1 X", DialogLayout.Bottom)
game.showLongText("explode arrow/taunt       P1 Z", DialogLayout.Bottom)
my_hero = sprites.create(img`
    ........................
    ........................
    ........................
    ............f...........
    ............f...........
    ...........ff...fff.....
    ...........f..fff88f....
    ...........f.ff888f8f...
    ..........f.ffffffffff..
    ..........f..d81dddde...
    ..........f..df1dddde...
    .........bbb.dddddeee...
    .........d9.d8888888f...
    ..........9dd8888bb8f...
    .............ffffffff...
    .............ff...ff....
    ........................
    ........................
    ........................
    ........................
    ........................
    ........................
    ........................
    ........................
    `, SpriteKind.hero)
my_hero.setPosition(33, 120)
controller.player1.moveSprite(my_hero)
info.player1.setLife(4)
hero_1 = sprites.create(img`
    . . . . . . . . . . . . . . . . 
    . . . . . . . . . . . . . . . . 
    . . . . . . . . . . . . . . . . 
    . . . . . . . . . . . . . . . . 
    . . . . . . . . . . . . . . . . 
    . . . . . . . . . . . . . . . . 
    . . . . . . . . . . . . . . . . 
    . . . . . . . . . . . . . . . . 
    . . . . . . . . . . . . . . . . 
    . . . . . . . . . . . . . . . . 
    . . . . . . . . . . . . . . . . 
    . . . . . . . . . . . . . . . . 
    . . . . . . . . . . . . . . . . 
    . . . . . . . . . . . . . . . . 
    . . . . . . . . . . . . . . . . 
    . . . . . . . . . . . . . . . . 
    `, SpriteKind.variable)
scene.cameraFollowSprite(my_hero)
tileUtil.connectMaps(tilemap1, tilemap2, MapConnectionKind.Door1)
